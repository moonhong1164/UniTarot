<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>UniTarot</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#f7f5f1;
  --card:#ffffff;
  --ink:#222;
  --muted:#666;
  --line:#e2dfd8;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI","Noto Sans KR",sans-serif;
  background:var(--bg);
  color:var(--ink);
}
header{
  padding:18px;
  text-align:center;
  font-size:22px;
  font-weight:800;
}
main{
  max-width:1200px;
  margin:0 auto;
  padding:12px 16px 48px;
}

/* ================= ë„ê° ================= */
#gallery{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(110px,1fr));
  gap:16px;
  justify-items:center;
}
.card{
  width:110px;
  cursor:pointer;
}
.card img{
  width:100%;
  border-radius:10px;
  box-shadow:0 8px 24px rgba(0,0,0,.14);
  transition:transform .15s ease;
}
.card:hover img{transform:scale(1.05)}

/* ================= ë¦¬ë”© ================= */
#reading{
  margin-top:36px;
  background:var(--card);
  border-radius:18px;
  padding:26px 28px;
  box-shadow:0 14px 40px rgba(0,0,0,.10);
  line-height:1.75;
}
.section{
  margin-top:22px;
}
.section-title{
  font-weight:800;
  margin-bottom:8px;
}
p{margin:6px 0}

/* ================= ë°˜ì‘í˜• ================= */
@media(max-width:520px){
  .card{width:92px}
}
</style>
</head>

<body>

<header>ğŸ”® UniTarot</header>

<main>
  <section id="gallery"></section>
  <section id="reading"></section>
</main>

<script>
/* ==================================================
   ì¹´ë“œ ì´ë¯¸ì§€ íŒŒì¼ëª… (ë„¤ê°€ ì˜¬ë¦° ê·¸ëŒ€ë¡œ)
================================================== */
const CARD_FILES = [
  "0. ë°”ë³´ ì¹´ë“œ.jpg","1. ë§ˆë²•ì‚¬ ì¹´ë“œ.jpg","2. ì—¬ì‚¬ì œ ì¹´ë“œ.jpg","3. ì—¬í™©ì œ ì¹´ë“œ.jpg",
  "4. í™©ì œ ì¹´ë“œ.jpg","5. êµí™© ì¹´ë“œ.jpg","6. ì—°ì¸ ì¹´ë“œ.jpg","7. ì „ì°¨ ì¹´ë“œ.jpg",
  "8. í˜ ì¹´ë“œ.jpg","9. ì€ë‘”ì ì¹´ë“œ.jpg","10. ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´.jpg","11. ì •ì˜ ì¹´ë“œ.jpg",
  "12. í–‰ë§¨ ì¹´ë“œ.jpg","13. ì£½ìŒ ì¹´ë“œ.jpg","14. ì ˆì œ ì¹´ë“œ.jpg","15. ì•…ë§ˆ ì¹´ë“œ.jpg",
  "16. íƒ€ì›Œ ì¹´ë“œ.jpg","17. ë³„ ì¹´ë“œ.jpg","18. ë‹¬ ì¹´ë“œ.jpg","19. íƒœì–‘ ì¹´ë“œ.jpg",
  "20. ì‹¬íŒ ì¹´ë“œ.jpg","21. ì„¸ê³„ ì¹´ë“œ.jpg"
];

/* ==================================================
   ì¹´ë“œ í•´ì„ (PDF ì›ë¬¸ ë¶™ì—¬ë„£ëŠ” ìë¦¬)
================================================== */
const MEANINGS = {
  "4. í™©ì œ ì¹´ë“œ.jpg": `
í˜„ì‹¤ ì„¸ê³„ì—ì„œì˜ êµ¬ì¡°ì™€ ì§ˆì„œë¥¼ ìƒì§•í•©ë‹ˆë‹¤.
ê¶Œìœ„ì™€ ì±…ì„, ë³´í˜¸ì˜ ì—ë„ˆì§€ê°€ ê°•í•˜ê²Œ ì‘ìš©í•©ë‹ˆë‹¤.

ìˆ˜ë¹„í•™ì  ì˜ë¯¸
4ëŠ” ê¸°ë°˜, ì•ˆì •, í˜„ì‹¤ êµ¬ì¶•ì„ ëœ»í•©ë‹ˆë‹¤.

ì¡°ì–¸
ì§ˆì„œë¥¼ ì„¸ìš°ê³  ì±…ì„ì„ íšŒí”¼í•˜ì§€ ë§ˆì„¸ìš”.

ê²½ê³ 
ê³¼ë„í•œ í†µì œëŠ” ê´€ê³„ë¥¼ ê²½ì§ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

5. êµí™© / THE HIEROPHANT
ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜
`
};

/* ==================================================
   PDF ì›ë¬¸/ë¦¬ë”© ì •ë¦¬
   - ğŸŒ³ ì¹´ë“œëª…/ë²ˆí˜¸/ì•„ë¥´ì¹´ë‚˜ ì œê±°
   - ë‹¤ìŒ ì¹´ë“œ ëˆ„ìˆ˜ ì œê±°
================================================== */
function cleanMeaningText(text){
  if(!text) return "";

  let lines = text
    .replace(/\r/g,"")
    .split(/\n+/)
    .map(l=>l.trim())
    .filter(Boolean);

  lines = lines.filter(l=>{
    if(l.startsWith("ğŸŒ³")) return false;
    if(/ë©”ì´ì €\s*ì•„ë¥´ì¹´ë‚˜|ë§ˆì´ë„ˆ\s*ì•„ë¥´ì¹´ë‚˜|ì½”íŠ¸\s*ì¹´ë“œ|í•\s*ì¹´ë“œ/.test(l)) return false;
    if(/^\d+\.\s*.+\s*\/\s*/.test(l)) return false;
    return true;
  });

  const looksLikeNext = l =>
    /^\d+\.\s*/.test(l) ||
    /(THE|of)\s+[A-Z]/.test(l) ||
    /(ì™„ë“œ|ì»µ|ì†Œë“œ|íœíƒ€í´)/.test(l);

  while(lines.length && looksLikeNext(lines[lines.length-1])){
    lines.pop();
  }

  return lines.join("\n");
}

/* ==================================================
   ë¦¬ë”© ë Œë”ë§
================================================== */
function renderReading(file){
  const box = document.getElementById("reading");
  let raw = MEANINGS[file] || "ì•„ì§ í•´ì„ì´ ì¤€ë¹„ë˜ì§€ ì•Šì€ ì¹´ë“œì…ë‹ˆë‹¤.";
  raw = cleanMeaningText(raw);

  raw = raw
    .replace(/ìˆ˜ë¹„í•™/g,"ğŸ”¢ ìˆ˜ë¹„í•™")
    .replace(/ì¡°ì–¸/g,"ğŸ”® ì¡°ì–¸")
    .replace(/ê²½ê³ /g,"âš ï¸ ê²½ê³ ");

  box.innerHTML = raw
    .split("\n")
    .map(line=>{
      if(line.startsWith("ğŸ”¢")||line.startsWith("ğŸ”®")||line.startsWith("âš ï¸")){
        return `<div class="section"><div class="section-title">${line}</div>`;
      }
      return `<p>${line}</p>`;
    }).join("");
}

/* ==================================================
   ì´ˆê¸°í™”
================================================== */
(function init(){
  const gallery = document.getElementById("gallery");
  CARD_FILES.forEach(file=>{
    const div = document.createElement("div");
    div.className="card";
    div.innerHTML=`<img src="${file}" alt="">`;
    div.onclick=()=>renderReading(file);
    gallery.appendChild(div);
  });
})();
</script>

</body>
</html>
